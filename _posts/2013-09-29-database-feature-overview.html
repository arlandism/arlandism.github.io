---
layout: article
title: Database Feature Overview
date: '2013-09-29T18:34:00.000-07:00'
author: aml
tags:
- apprenticeship
modified_time: '2013-09-29T18:34:32.095-07:00'
blogger_id: tag:blogger.com,1999:blog-1730093662423317857.post-4336760553934490535
blogger_orig_url: https://immutablearlandis.blogspot.com/2013/09/database-feature-overview.html
---

I'm in the middle of wrapping up a massive story - one that I estimated a bit too optimistically. The feature was straightforward: Pick a SQL database, write moves from Tic Tac Toe to that database, and render them in the same way I rendered moves from file storage.<br /><br /><b>Major Hurdles</b><br /><b><br /></b>The most significant obstacle to completing the story was the problem of how to insert the new storage system into the controller of the application. There was a hardcoded reference to the file storage system. With this in mind, I began to write the database storage code in a way that conformed to the same interface as the file storage system. I knew this was the logical next step and chose to ignore the problem of inserting alternate storage mechanisms.<br /><br />Having written tons of code to get the storage system working, it came time to integrate, which means I was back to my original problem.<br /><br />One option was to pass the name of the desired storage class as an option on the command line. I could capture that reference and, using a factory or conditional, convert that reference to the appropriate storage class.<br /><br />I chose to write another class that conformed to the storage mechanism interface, but that read from a configuration file for the name of the desired storage class. This implementation made the transition easier to mentally model the transition. Originally, I envisioned it making the transition of the controller client code easier to work with as well, but I ended up having to change this anyway since there was a new class to worry about. The drawback to this approach is that there's a more complicated schema for the user of the program to configure. They have to know the name of the class implementing their desired storage mechanism and change a configuration file to reflect that.<br /><br />Maybe after some further reflection I'll figure out a more elegant solution. I wasn't particularly thrilled about either of the options I saw, but I liked the option I chose because I didn't want a bunch of setup inside "main". It also seems to me that configuring a storage system isn't a spur of the moment decision, so while a command line option seems a lot more convenient it may not be necessary.
